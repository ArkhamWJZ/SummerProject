<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<form method="post" action="/upload/" enctype="multipart/form-data" target="ifm1">


    <input type="file" name="file" id="file"/>


    <input type="button" value="提交" onclick="upload()"/>
</form>
<br>
<br>
<br>
<br>
<div>显示图片
    <img id="images">
</div>
<br>
<br>
<br>
<br>
<div>显示路径
    <a href="" id="imagess">链接</a>
</div>


</div>
<br>
<br>
<br>
<br>
<div>
    {#    href="/static/img/TC代码.txt" #}
    <a id="up"> 下载文件</a>
</div>


<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>

<script>
    function upload() {
        var formData = new FormData();
        var file = document.getElementById('file').files[0];
        formData.append("file", file);
        $.ajax({
            url: "upload/",
            type: "post",
            data: formData,
            dataType: "json",
            cache: false,     //上传文件无需缓存
            processData: false,//用于对data参数进行序列化处理 这里必须false
            contentType: false, //必须*/
            success: function (data) {
                console.log("22", data);
                $("#images").attr("src", data.image)
                $("#imagess").attr("href", data.image)

            }
        });
    }

    $("#up").on("click", function () {
        $.ajax({
            url: "http://127.0.0.1:8000/down/",
            type: "get",
            data: {},
            success: function (data) {
                var $a = $('<a></a>');

                $a.attr("href", "http://127.0.0.1:8000/down/");
                $("body").append($a);
                $a[0].click();
                $a.remove();
            }

        })

    });
</script>
</body>
</html>